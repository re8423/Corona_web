<!DOCTYPE html>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<link rel="stylesheet" href="main.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>

<script src="data.js"></script>

<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.24.0/d3-legend.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.6.1/papaparse.min.js"></script>


<html>

<head>
<title>Page Title</title>
</head>
<body onload="getc(); makechart(); hospchart(getnamehosp()); ruptchart(getnamerupt(),false); callchart(getnamecall(),false);">

<div class="topnav">
    <a href="index.html">Home</a>
    <a class="active"href="main.html">Top 10 Worst-hit Countries</a>
    <a href="#about">About</a>
</div>

<center><h1>Top 10 Currently Worst-hit Countries</h1></center>
<div class="container">
    <div class="form-group center" style="width:300px;">
        <label for="sel1">Select Country:</label>
        <select class="form-control" id="sel1">
            
        </select>
      </div>
</div>

<script>
    document.getElementById("sel1").onchange = runsubd;
    function runsubd(){
        subd();
        link = guidelines();
        d3.selectAll("svg").remove()
        confchart(getname(),false);
        deathchart(getnamedeath(),false);
        recchart(getnamerec(),false);
        hospchart(getnamehosp(), false);
        ruptchart(getnamerupt(),false);
        callchart(getnamecall(),false);
        
        var selected = document.getElementById("sel1");
        var c = selected.value;

        for (var i = 0; i < c.length; i++) {
            if(c.charAt(i) == ':'){
                for(var a =0; a<i; a++){
                    c = c.replace(c.charAt(a), '')
                }
                c = c.replace(c.charAt(0), '')
                break
            }
        }

        document.getElementById("conftitle").innerHTML = 'Confirmed cases in '.concat(c);
        document.getElementById("deathtitle").innerHTML = 'Deaths in '.concat(c);
        document.getElementById("rectitle").innerHTML = 'Recovered cases in '.concat(c);
        document.getElementById("hosptitle").innerHTML = 'Hospitals with most open beds in '.concat(c);
        document.getElementById("rupttitle").innerHTML = 'Bankrupt buisnesses in '.concat(c);
        document.getElementById("calltitle").innerHTML = 'Mental health hotline calls in '.concat(c);

        var guide = document.getElementById("guideline")
        guide.innerHTML = 'Government guidelines for '.concat(c);
        guide.setAttribute('href', link)
    }

</script>


<center><h3 id="conftitle">Confirmed cases in US</h3></center>
<center><div id="confcont"></div></center>

<input type="radio" name="type" value="conf" id="conf" onclick="d3.selectAll('#confchart').remove(); confchart(getname(),false);">
    <label for="conf">Per day</label><br>
<input type="radio" name="type" value="deaths" id="deaths" onclick="d3.selectAll('#confchart').remove(); confchart(getname(),true)">
    <label for="deaths">Total</label><br>

<center><h3 id="deathtitle">Deaths in US</h3></center>
<center><div id="deathscont"></div></center>

<input type="radio" name="type" value="conf" id="conf" onclick="d3.selectAll('#deathchart').remove(); deathchart(getnamedeath(),false);">
    <label for="conf">Per day</label><br>
<input type="radio" name="type" value="deaths" id="deaths" onclick="d3.selectAll('#deathchart').remove(); deathchart(getnamedeath(),true)">
    <label for="deaths">Total</label><br>



<center><h3 id="rectitle">Recovered patients in US</h3></center>
<center><div id="reccont"></div></center>

<input type="radio" name="type" value="conf" id="conf" onclick="d3.selectAll('#recchart').remove(); recchart(getnamerec(),false);">
    <label for="conf">Per day</label><br>
<input type="radio" name="type" value="deaths" id="deaths" onclick="d3.selectAll('#recchart').remove(); recchart(getnamerec(),true)">
    <label for="deaths">Total</label><br>

<div class="container3">
    <center><h3 id="s_title" style="display: block">Statistics:</h3></center>

    <center><h3 id="d_title" style="display: block">Total deaths:</h3></center>
    <center><h3 id="deaths"></h3></center>

    <center><h3 id="dr_title" style="display: block">Death rate:</h3></center>
    <center><h3 id="deathrate"></h3></center>

    <center><h3 id="tc_title" style="display: block">Total cases:</h3></center>
    <center><h3 id="totalcases"></h3></center>
</div>

<div class ="container4">
    <center><h3 id="hosptitle" style="display: block">Hospitals with most open beds in US:</h3></center>
    <br>
    <center><div id="hospchart"></div></center>
</div>

<div class ="container">
    <center><h3><a id ="guideline" href="">Link to government guideline</a></h3></center>
</div>

<center><h3 id="rupttitle">Bankrupt buisnesses</h3></center>
<form class="radioin">
    <input type="radio" name="type" value="conf" id="conf" onclick="d3.selectAll('#ruptchart').remove(); ruptchart(getnamerupt(),false);">
    <label for="conf">Per day</label><br>
    <input type="radio" name="type" value="deaths" id="deaths" onclick="d3.selectAll('#ruptchart').remove(); ruptchart(getnamerupt(),true)">
    <label for="deaths">Total</label><br>
</form>

<center><div id="ruptcont"></div></center>

<center><h3 id="calltitle">Mental health hotline calls</h3></center>
<form class="radioin">
    <input type="radio" name="type" value="conf" id="conf" onclick="d3.selectAll('#callchart').remove(); callchart(getnamecall(),false);">
    <label for="conf">Per day</label><br>
    <input type="radio" name="type" value="deaths" id="deaths" onclick="d3.selectAll('#callchart').remove(); callchart(getnamecall(),true)">
    <label for="deaths">Total</label><br>
</form>

<center><div id="callcont"></div></center>

</body>
</html>